language: golang
rvm:
  - 1.15

script:
  - |
    go get -v -t -d ./...
    if [ -f Gopkg.toml ]; then
      curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh
      dep ensure
    fi
  - go run github.com/facebook/ent/cmd/entc generate ./ent/schema
  - go build omestore.go
  - go test ./...